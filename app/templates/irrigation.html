{% extends "base.html" %}
{% block title %}Riego{% endblock %}

{% block content %}
<h2>ðŸ’§ Zonas de riego</h2>
<div class="card">
  <h3>Riegos programados</h3>

  {% if schedules %}
  <table>
    <tr>
      <th>Hora</th>
      <th>DuraciÃ³n</th>
      <th>Estado</th>
    </tr>

    {% for s in schedules %}
    <tr>
      <td>{{ s[1] }}</td>
      <td>{{ s[2] }} min</td>
      <td>{{ "ON" if s[3] else "OFF" }}</td>
    </tr>
    {% endfor %}
  </table>
  {% else %}
    <p>No hay riegos programados.</p>
  {% endif %}
</div>

<div class="zones-grid">
  {% for z in zones %}
  <div class="zone-card" id="zone-{{ z[0] }}">

    <div class="valve-wrapper">
      <img class="valve-icon"
           src="{{ url_for('static', filename='img/valve.png') }}">
    </div>

    <h3>{{ z[1] }}</h3>

    <div class="zone-status">APAGADO</div>
    <div class="zone-timer" id="timer-{{ z[0] }}">00:00</div>

    <button onclick="toggleZone({{ z[0] }})">
      Activar / Desactivar
    </button>

  </div>
  {% endfor %}

{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/irrigation.js') }}"></script>
{% endblock %}
