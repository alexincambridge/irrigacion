{% extends "base.html" %}
{% block title %}Riego{% endblock %}

{% block content %}

<h2>ðŸ’§ Riego</h2>

<div class="card">
  <h3>Programar riego</h3>

  <select id="sector">
    <option value="1">Sector 1</option>
    <option value="2">Sector 2</option>
    <option value="3">Sector 3</option>
  </select>

  <input type="date" id="date">
  <input type="time" id="time">
  <input type="time" id="period">

  <button onclick="createSchedule()">Guardar</button>
</div>

<div class="card">
  <h3>Riegos programados</h3>
  <div id="scheduleList"></div>
</div>

<div class="card">
  <h3>Riego manual</h3>

  <button onclick="manual(1)">Sector 1</button>
  <button onclick="manual(2)">Sector 2</button>
  <button onclick="manual(3)">Sector 3</button>
</div>

<div class="card">
  <h3>Historial</h3>

  {% if history %}
  <table>
    <tr>
      <th>Sector</th>
      <th>Inicio</th>
      <th>Fin</th>
      <th>Tipo</th>
    </tr>

    {% for h in history %}
    <tr>
      <td>{{ h[0] }}</td>
      <td>{{ h[1] }}</td>
      <td>{{ h[2] or "-" }}</td>
      <td>{{ h[3] }}</td>
    </tr>
    {% endfor %}
  </table>
  {% else %}
    <p>No hay historial.</p>
  {% endif %}
</div>

{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/irrigation.js') }}"></script>
{% endblock %}
